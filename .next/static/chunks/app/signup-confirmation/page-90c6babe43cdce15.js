(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[311],{951:(e,a,s)=>{Promise.resolve().then(s.bind(s,8985))},8985:(e,a,s)=>{"use strict";s.d(a,{default:()=>n});var t=s(5155),r=s(9606),o=s(3391),d=s(4284),l=s(2110);s(5716);var i=s(6046);function n(){let e=(0,o.wA)(),a=(0,i.useSearchParams)().get("email"),s=(0,i.useRouter)(),{loading:n,error:u}=(0,o.d4)(e=>e.auth);console.log("The email:",a);let{register:c,handleSubmit:p,formState:{errors:m}}=(0,r.mN)(),g=async t=>{var r,o,i;try{let o={email:a,otp:t.code};console.log("Thisis the verifcation: ",o);let i=await e((0,d.vJ)(o));if(d.vJ.fulfilled.match(i)&&(l.oR.success(i.payload.message),s.push("/login")),d.vJ.rejected.match(i)){let e=(null===(r=i.payload)||void 0===r?void 0:r.message)||"Verification failed";l.oR.error(e);return}}catch(a){l.oR.error((null==a?void 0:a.message)||"Verification failed");let e=(null===(i=a.response)||void 0===i?void 0:null===(o=i.data)||void 0===o?void 0:o.message)||a.message||"Network error occurred";l.oR.error(e)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-white flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,t.jsx)(l.N9,{position:"top-right",autoClose:3e3,hideProgressBar:!1,className:"!font-sans"}),(0,t.jsx)("h1",{className:"text-center text-3xl font-bold tracking-tight text-gray-900",children:"Check your email for code"}),(0,t.jsx)("p",{className:"text-center font-medium pt-2 mt-2",children:"A code has been sent to your email, input it to complete your registration"})]}),(0,t.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,t.jsx)("div",{className:"bg-white py-8 px-4 sm:rounded-lg sm:px-10",children:(0,t.jsxs)("form",{className:"space-y-6",onSubmit:p(g),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{...c("code",{required:"Verification code is required",pattern:{value:/^[0-9]{6}$/,message:"Please enter a valid 6-digit code"}}),type:"text",placeholder:"Code",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2"}),m.code&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.code.message})]}),(0,t.jsx)("button",{type:"submit",disabled:n,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-full shadow-sm text-sm font-medium text-white bg-[#2A2F38] hover:bg-[#2A2F38] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2A2F38] disabled:opacity-50",children:n?"Loading...":"Continue"})]})})})]})}s(8173)},4284:(e,a,s)=>{"use strict";s.d(a,{Ay:()=>g,BD:()=>n,Lx:()=>i,Wd:()=>d,vJ:()=>l,xw:()=>u});var t=s(1983),r=s(2651),o=s(6828);let d=(0,t.zD)("auth/signUpUser",async(e,a)=>{let{rejectWithValue:s}=a;try{return(await r.A.post("https://".concat(o.T,"/auth/signup"),e)).data}catch(e){return s(e.response.data)}}),l=(0,t.zD)("auth/verifyOTP",async(e,a)=>{let{rejectWithValue:s}=a;try{console.log("vv",e);let a=await r.A.post("https://".concat(o.T,"/auth/verify"),{email:e.email,otp:e.otp.toString()});return console.log("API Response:",a.data),a.data}catch(e){var t;return s((null===(t=e.response)||void 0===t?void 0:t.data)||{message:"Verification failed"})}}),i=(0,t.zD)("auth/loginUser",async(e,a)=>{let{rejectWithValue:s}=a;try{return(await r.A.post("https://".concat(o.T,"/auth/login"),e)).data}catch(e){return s(e.response.data)}}),n=(0,t.zD)("auth/forgotPassword",async(e,a)=>{let{rejectWithValue:s}=a;try{return(await r.A.post("https://".concat(o.T,"/auth/forgot-password"),{email:e})).data}catch(e){return s(e.response.data)}}),u=(0,t.zD)("auth/resetPassword",async(e,a)=>{let{rejectWithValue:s}=a;try{return(await r.A.post("https://".concat(o.T,"/auth/reset-password"),e)).data}catch(e){return s(e.response.data)}}),c=(0,t.Z0)({name:"auth",initialState:{user:null,loading:!1,error:null,isVerified:!1,token:null,message:null,isAuthenticated:!1},reducers:{clearAuthState:e=>{e.error=null,e.message=null},logout:e=>{e.user=null,e.token=null,e.isVerified=!1,e.isAuthenticated=!1}},extraReducers:e=>{e.addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.token=a.payload.token,e.message=a.payload.message}).addCase(d.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(l.pending,e=>{e.loading=!0,e.error=null}).addCase(l.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.isVerified=a.payload.user.isVerified,e.message=a.payload.message}).addCase(l.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.token=a.payload.token,e.isVerified=a.payload.user.isVerified,e.message=a.payload.message,e.isAuthenticated=!0}).addCase(i.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,a)=>{e.loading=!1,e.message=a.payload.message}).addCase(n.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(u.pending,e=>{e.loading=!0,e.error=null}).addCase(u.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.message=a.payload.message}).addCase(u.rejected,(e,a)=>{e.loading=!1,e.error=a.payload})}}),{clearAuthState:p,logout:m}=c.actions,g=c.reducer},6828:(e,a,s)=>{"use strict";s.d(a,{T:()=>t});let t="equipmentapi.onrender.com";console.log("The base url:",t)},5716:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[797,391,173,25,606,829,441,517,358],()=>a(951)),_N_E=e.O()}]);