(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[162],{7546:(e,a,s)=>{Promise.resolve().then(s.bind(s,1060))},1060:(e,a,s)=>{"use strict";s.d(a,{default:()=>i});var r=s(5155);s(2115);var t=s(9606),l=s(3391),d=s(2185),o=s(6046),n=s(1665);function i(){let e=(0,l.wA)(),a=(0,o.useRouter)(),{loading:s,error:i}=(0,l.d4)(e=>e.auth),{register:u,handleSubmit:c,formState:{errors:m}}=(0,t.mN)(),p=async s=>{try{let t=await e((0,d.BD)(s.email));if(d.BD.fulfilled.match(t)&&(n.oR.success(t.payload.message),a.push("/password-recovery")),d.BD.rejected.match(t)){var r;let e=(null===(r=t.payload)||void 0===r?void 0:r.message)||"Password reset request failed";n.oR.error(e)}}catch(e){n.oR.error((null==e?void 0:e.message)||"An error occurred")}};return(0,r.jsxs)("div",{className:"min-h-screen bg-white flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,r.jsx)("h2",{className:"text-center text-3xl font-bold tracking-tight text-gray-900",children:"Forgot Password?"}),(0,r.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your email address and we'll send you a code to reset your password"})]}),(0,r.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,r.jsxs)("div",{className:"bg-white py-8 px-4 sm:rounded-lg sm:px-10",children:[(0,r.jsxs)("form",{className:"space-y-6",onSubmit:c(p),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{...u("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",placeholder:"Enter your email",className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-[#2A2F38] focus:outline-none focus:ring-yellow-500"}),m.email&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:m.email.message})]}),(0,r.jsx)("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-full shadow-sm text-sm font-medium text-white bg-[#2A2F38] hover:bg-[#2A2F38] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50",children:s?"Sending...":"Send Reset Code"})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)("p",{className:"text-center text-sm",children:["Remember your password?"," ",(0,r.jsx)("a",{href:"/login",className:"font-medium text-[#2A2F38] hover:text-gray-700",children:"Login"})]})})]})})]})}},2185:(e,a,s)=>{"use strict";s.d(a,{Ay:()=>g,BD:()=>i,Lx:()=>n,xw:()=>u,Wd:()=>d,vJ:()=>o});var r=s(1983),t=s(2651);let l="equipmentapi.onrender.com";console.log("The base url:",l);let d=(0,r.zD)("auth/signUpUser",async(e,a)=>{let{rejectWithValue:s}=a;try{return(await t.A.post("https://".concat(l,"/auth/signup"),e)).data}catch(e){return s(e.response.data)}}),o=(0,r.zD)("auth/verifyOTP",async(e,a)=>{let{rejectWithValue:s}=a;try{console.log("vv",e);let a=await t.A.post("https://".concat(l,"/auth/verify"),{email:e.email,otp:e.otp.toString()});return console.log("API Response:",a.data),a.data}catch(e){var r;return s((null===(r=e.response)||void 0===r?void 0:r.data)||{message:"Verification failed"})}}),n=(0,r.zD)("auth/loginUser",async(e,a)=>{let{rejectWithValue:s}=a;try{return(await t.A.post("https://".concat(l,"/auth/login"),e)).data}catch(e){return s(e.response.data)}}),i=(0,r.zD)("auth/forgotPassword",async(e,a)=>{let{rejectWithValue:s}=a;try{return(await t.A.post("https://".concat(l,"/auth/forgot-password"),{email:e})).data}catch(e){return s(e.response.data)}}),u=(0,r.zD)("auth/resetPassword",async(e,a)=>{let{rejectWithValue:s}=a;try{return(await t.A.post("https://".concat(l,"/auth/reset-password"),e)).data}catch(e){return s(e.response.data)}}),c=(0,r.Z0)({name:"auth",initialState:{user:null,loading:!1,error:null,isVerified:!1,token:null,message:null},reducers:{clearAuthState:e=>{e.error=null,e.message=null},logout:e=>{e.user=null,e.token=null,e.isVerified=!1}},extraReducers:e=>{e.addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.token=a.payload.token,e.message=a.payload.message}).addCase(d.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.isVerified=a.payload.user.isVerified,e.message=a.payload.message}).addCase(o.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.token=a.payload.token,e.isVerified=a.payload.user.isVerified,e.message=a.payload.message}).addCase(n.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.loading=!1,e.message=a.payload.message}).addCase(i.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(u.pending,e=>{e.loading=!0,e.error=null}).addCase(u.fulfilled,(e,a)=>{e.loading=!1,e.user=a.payload.user,e.message=a.payload.message}).addCase(u.rejected,(e,a)=>{e.loading=!1,e.error=a.payload})}}),{clearAuthState:m,logout:p}=c.actions,g=c.reducer}},e=>{var a=a=>e(e.s=a);e.O(0,[606,951,587,441,517,358],()=>a(7546)),_N_E=e.O()}]);