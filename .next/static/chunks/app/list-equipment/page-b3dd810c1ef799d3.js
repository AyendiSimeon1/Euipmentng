(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74],{4540:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,8173,23)),Promise.resolve().then(a.bind(a,9703)),Promise.resolve().then(a.bind(a,5062))},9703:(e,t,a)=>{"use strict";a.d(t,{default:()=>m});var l=a(5155),s=a(2115),i=a(5565),n=a(8173),r=a.n(n),o=a(1536),d=a(8422),c=a(356);let m=()=>{let[e,t]=(0,s.useState)(!1);return(0,l.jsx)("header",{className:"bg-gray-800 py-4 px-4 sm:px-6",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"relative h-8 w-24",children:(0,l.jsx)(i.default,{src:"/logo.png",alt:"Equipment.ng Logo",fill:!0,style:{objectFit:"contain"},priority:!0})}),(0,l.jsx)("span",{className:"text-white font-bold text-lg ml-2",children:"Equipment.ng"})]}),(0,l.jsxs)("nav",{className:"hidden md:flex items-center space-x-6",children:[(0,l.jsx)(r(),{href:"/my-listings",className:"text-white bg-[#2A2F38] font-medium px-6 py-3 text-lg rounded-full",children:"My Listings"}),(0,l.jsx)(r(),{href:"/login",className:"text-white bg-[#2A2F38] font-medium px-6 py-3 text-lg rounded-full",children:"Login"}),(0,l.jsx)("button",{className:"bg-[#2A2F38] font-medium px-6 py-3 text-lg rounded-full",children:(0,l.jsx)(r(),{href:"/saved-equipments",children:(0,l.jsx)(c.A,{className:"text-white h-6 w-6"})})}),(0,l.jsx)("button",{className:"text-white bg-[#2A2F38] font-medium px-3 py-3 text-lg rounded-full",children:(0,l.jsx)(r(),{href:"/settings",children:(0,l.jsx)(o.NBi,{className:"text-white h-6 w-6 t"})})}),(0,l.jsx)(r(),{href:"/settings",className:"text-white",children:"Complete Profile"})]}),(0,l.jsx)("button",{className:"md:hidden text-white p-2",onClick:()=>{t(!e)},"aria-label":"Toggle menu",children:e?(0,l.jsx)(d.U_s,{className:"h-6 w-6"}):(0,l.jsx)(d.TF4,{className:"h-6 w-6"})})]}),e&&(0,l.jsxs)("nav",{className:"md:hidden mt-4 space-y-4",children:[(0,l.jsx)(r(),{to:"/saved-equipments",className:"block text-white bg-[#2A2F38] font-medium px-6 py-3 text-lg rounded-full",children:"My Listings"}),(0,l.jsx)(r(),{to:"/login",className:"block text-white bg-[#2A2F38] font-medium px-6 py-3 text-lg rounded-full",children:"Login"}),(0,l.jsx)(r(),{to:"/settings",className:"block text-white bg-[#2A2F38] font-medium px-6 py-3 text-lg rounded-full",children:"Home"})]})]})})}},5062:(e,t,a)=>{"use strict";a.d(t,{default:()=>x});var l=a(5155),s=a(9606);function i(e){let{label:t,name:a,register:s,error:i,type:n="text"}=e;return(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,l.jsx)("input",{...s(a),type:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),i&&(0,l.jsx)("span",{className:"text-red-500 text-sm",children:i.message})]})}function n(e){let{label:t,name:a,register:s,options:i,error:n}=e;s(a),i.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value)),n&&n.message}var r=a(2115),o=a(6046),d=a(2367),c=a(3391),m=a(2110);function u(e){let{label:t,name:a,register:l}=e;({...l(a)})}a(5716);let p=(0,a(7401).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function x(){let[e,t]=(0,r.useState)(1),[a,x]=(0,r.useState)([]),[g,h]=(0,r.useState)(""),y=(0,c.wA)(),b=(0,o.useRouter)(),[v,f]=(0,r.useState)([]),[j,N]=(0,r.useState)(null),[q,w]=(0,r.useState)([]),{loading:E}=(0,c.d4)(e=>e.equipment||{}),{register:C,handleSubmit:A,formState:{errors:S},watch:k}=(0,s.mN)();(0,r.useEffect)(()=>{localStorage.getItem("token")||(b.push("/login"),m.oR.error("Please log in to add equipment"))},[b]);let F=async e=>{var t,a,l,s,i,n,r,o,c,u,p,x,g,h,f,N;try{let p=new FormData,x={location:(null===(t=e.location)||void 0===t?void 0:t.trim())||"Default Location",category:(null===(a=e.category)||void 0===a?void 0:a.trim())||"construction",subcategory:(null===(l=e.subcategory)||void 0===l?void 0:l.trim())||"general",name:(null===(s=e.name)||void 0===s?void 0:s.trim())||"Unnamed Equipment",description:(null===(i=e.description)||void 0===i?void 0:i.trim())||"No description provided",brand:(null===(n=e.brand)||void 0===n?void 0:n.trim())||"Unknown Brand",model:(null===(r=e.model)||void 0===r?void 0:r.trim())||"Generic Model",workingcondition:String("brandNew"===e.condition),pricingschedule:(null===(o=e.priceSchedule)||void 0===o?void 0:o.trim())||"hourly",amount:String(e.amount||"0"),negotiable:String(!!e.negotiable)};Object.entries(x).forEach(e=>{let[t,a]=e;p.append(t,a)}),(null==v?void 0:v.length)&&v.forEach(e=>{e instanceof File&&p.append("images",e)}),j instanceof File&&p.append("video",j);let g={};p.forEach((e,t)=>{g[t]=e}),console.log("Submitting form data:",g);let h=await y((0,d.M5)(g));if(h.type===d.M5.fulfilled.type)m.oR.success(h.payload.message),b.push("/");else{let e=(null===(c=h.payload)||void 0===c?void 0:c.error)||(null===(u=h.payload)||void 0===u?void 0:u.message)||"Failed to add equipment";m.oR.error(e)}}catch(t){console.error("Equipment creation error:",{message:t.message,response:null===(p=t.response)||void 0===p?void 0:p.data,status:null===(x=t.response)||void 0===x?void 0:x.status});let e=(null===(h=t.response)||void 0===h?void 0:null===(g=h.data)||void 0===g?void 0:g.message)||(null===(N=t.response)||void 0===N?void 0:null===(f=N.data)||void 0===f?void 0:f.error)||"An error occurred while adding equipment";m.oR.error(e)}};return(0,l.jsxs)("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-8 text-center",children:"List an Equipment"}),(0,l.jsxs)("form",{onSubmit:A(F),children:[1===e&&(0,l.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,l.jsx)(m.N9,{}),(0,l.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Basic Details"}),(0,l.jsx)(i,{label:"Location",name:"location",register:C,error:S.location}),(0,l.jsx)(n,{label:"Category",name:"category",register:C,options:[{value:"electronics",label:"Electronics"},{value:"machinery",label:"Machinery"},{value:"construction",label:"Construction"},{value:"agriculture",label:"Agriculture"}],error:S.category}),(0,l.jsx)(n,{label:"Sub Category",name:"subcategory",register:C,options:[{value:"heavy",label:"Heavy Equipment"},{value:"light",label:"Light Equipment"},{value:"tools",label:"Tools"},{value:"accessories",label:"Accessories"}],error:S.subcategory}),(0,l.jsx)(i,{label:"Equipment Name",name:"name",register:C,error:S.name}),(0,l.jsx)(i,{label:"Description",name:"description",register:C,error:S.description}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Images"}),(0,l.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{let t=Array.from(e.target.files),a=t.filter(e=>{let t=e.type.startsWith("image/"),a=e.size<=5242880;return t||m.oR.error("Please upload only image files"),a||m.oR.error("Image size should be less than 5MB"),t&&a});0!==a.length&&(f(a),w(t.map(e=>URL.createObjectURL(e))))},className:"inline-flex items-center px-2 py-1 rounded-full text-sm bg-gray-100"}),(0,l.jsx)("div",{className:"mt-2 grid grid-cols-3 gap-2",children:q.map((e,t)=>(0,l.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"h-24 w-24 object-cover rounded"},t))})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Video"}),(0,l.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{let t=e.target.files[0];if(t){let e=t.type.startsWith("video/"),a=t.size<=0x3200000;if(!e){m.oR.error("Please upload a valid video file");return}if(!a){m.oR.error("Video size should be less than 50MB");return}N(t)}},className:"inline-flex items-center px-2 py-1 rounded-full text-sm bg-gray-100"})]})]}),2===e&&(()=>{let e=e=>{x(a.filter((t,a)=>a!==e))};return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Equipment Information"}),(0,l.jsx)(i,{label:"Name of Equipment",name:"equipmentName",register:C,error:S.equipmentName}),(0,l.jsx)(i,{label:"Description",name:"description",register:C,error:S.description}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsx)(i,{label:"Brand",name:"brand",register:C,error:S.brand}),(0,l.jsx)(i,{label:"Model",name:"model",register:C,error:S.model})]}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsxs)("div",{className:"space-y-2  ",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Accessories"}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-2 p-2 border rounded-md",children:[a.map((t,a)=>(0,l.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-sm bg-gray-100",children:[t,(0,l.jsx)("button",{type:"button",onClick:()=>e(a),className:"ml-1 text-gray-500 hover:text-gray-700",children:"\xd7"})]},a)),(0,l.jsx)("input",{type:"text",value:g,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&g.trim()&&(e.preventDefault(),x([...a,g.trim()]),h(""))},placeholder:"Type and press Enter to add",className:"flex-1 outline-none min-w-[200px] p-1"})]}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Press Enter to add an accessory"})]}),(0,l.jsxs)("div",{className:" gap-4 items-center ml-10",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Working condition"}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsxs)("label",{className:"inline-flex items-center",children:[(0,l.jsx)("input",{type:"radio",...C("condition",{required:"Please select a condition"}),value:"brandNew",className:"form-radio h-4 w-4 text-[#2A2F38] focus:ring-[#2A2F38]"}),(0,l.jsx)("span",{className:"ml-2",children:"Brand New"})]}),(0,l.jsxs)("label",{className:"inline-flex items-center",children:[(0,l.jsx)("input",{type:"radio",...C("condition",{required:"Please select a condition"}),value:"refurbished",className:"form-radio h-4 w-4 text-[#2A2F38] focus:ring-[#2A2F38]"}),(0,l.jsx)("span",{className:"ml-2",children:"Refurbished"})]})]})]}),S.condition&&(0,l.jsx)("p",{className:"text-sm text-red-600",children:S.condition.message})]})]})})(),3===e&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h2",{className:"text-xl text-center font-semibold mb-6",children:"Pricing"}),(0,l.jsx)(n,{label:"Price Schedule",name:"priceSchedule",register:C,options:[{value:"hourly",label:"Hourly"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"}],error:S.priceSchedule}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)(i,{label:"Price",name:"price",type:"number",min:"0",register:C,error:S.price}),(0,l.jsx)(n,{label:"Currency",name:"currency",register:C,options:[{value:"USD",label:"USD"},{value:"EUR",label:"EUR"}]})]}),(0,l.jsx)(u,{label:"Negotiable",name:"isNegotiable",register:C}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Payment Method"}),(0,l.jsxs)("div",{role:"radiogroup",className:"space-y-2",children:[(0,l.jsx)(u,{label:"Pay On Delivery",name:"paymentMethod",value:"onDelivery",register:C,type:"radio"}),(0,l.jsx)(u,{label:"Payment After Usage",name:"paymentMethod",value:"afterUsage",register:C,type:"radio"})]})]})]}),(0,l.jsxs)("div",{className:"mt-8 flex justify-between",children:[e>1&&(0,l.jsx)("button",{type:"button",onClick:()=>t(e-1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Previous"}),e<3?(0,l.jsx)("button",{type:"button",onClick:()=>t(e+1),className:"px-4 py-2 text-sm font-medium text-white bg-gray-500 rounded-md hover:bg-gray-800",children:"Next"}):(0,l.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white rounded-md flex items-center justify-center\n                    ".concat(E?"bg-gray-400 cursor-not-allowed":"bg-gray-500 hover:bg-gray-800"),children:E?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):"Complete"})]})]})]})}},2367:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>u,M5:()=>r,zp:()=>o});var l=a(1983),s=a(2651),i=a(6828);console.log("This is the base url:",i.T);let n=(0,l.zD)("equipments/fetchEquipments",async(e,t)=>{let{rejectWithValue:a}=t;try{return(await s.A.get("https://".concat(i.T,"/equipment/allequipment"))).data}catch(e){return a(e.response.data)}}),r=(0,l.zD)("equipments/addEquipment",async(e,t)=>{let{rejectWithValue:a}=t;try{let t=localStorage.getItem("token");if(!t)return a({message:"No authentication token found"});return console.log("Sending equipment data:",e),(await s.A.post("https://".concat(i.T,"/equipment/addequipment"),e,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).data}catch(e){var l;return console.error("Add equipment error:",e),a((null===(l=e.response)||void 0===l?void 0:l.data)||{message:"Failed to add equipment"})}}),o=(0,l.zD)("equipments/fetchEquipmentById",async(e,t)=>{let{rejectWithValue:a}=t;console.log("The fetch equipment id:",e);try{let t=await s.A.get("https://".concat(i.T,"/equipment/particularequipment/").concat(e));return console.log("The response",t.data),t.data}catch(e){return console.log(e),a(e.response.data)}}),d=(0,l.zD)("equipments/deleteEquipment",async(e,t)=>{let{rejectWithValue:a}=t;try{return{...(await s.A.delete("https://".concat(i.T,"/equipment/deleteequipment/").concat(e))).data,id:e}}catch(e){return a(e.response.data)}}),c=(0,l.Z0)({name:"equipments",initialState:{equipments:[],selectedEquipment:null,loading:!1,error:null,message:null},reducers:{clearEquipmentState:e=>{e.error=null,e.message=null}},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{e.loading=!1,e.equipments=t.payload}).addCase(n.rejected,(e,t)=>{var a;e.loading=!1,e.error=(null===(a=t.payload)||void 0===a?void 0:a.message)||"Failed to fetch equipments"}).addCase(r.pending,e=>{e.loading=!0,e.error=null}).addCase(r.fulfilled,(e,t)=>{e.loading=!1,e.equipments.push(t.payload.newEquipment),e.message=t.payload.message}).addCase(r.rejected,(e,t)=>{var a;e.loading=!1,e.error=(null===(a=t.payload)||void 0===a?void 0:a.message)||"Failed to add equipment"}).addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.loading=!1,e.selectedEquipment=t.payload}).addCase(o.rejected,(e,t)=>{var a;e.loading=!1,e.error=(null===(a=t.payload)||void 0===a?void 0:a.message)||"Failed to fetch equipment"}).addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.equipments=e.equipments.filter(e=>e._id!==t.payload.id),e.message=t.payload.message}).addCase(d.rejected,(e,t)=>{var a;e.loading=!1,e.error=(null===(a=t.payload)||void 0===a?void 0:a.message)||"Failed to delete equipment"})}}),{clearEquipmentState:m}=c.actions,u=c.reducer},6828:(e,t,a)=>{"use strict";a.d(t,{T:()=>l});let l="equipmentapi.onrender.com";console.log("The base url:",l)},5716:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[797,711,777,25,173,391,606,732,829,441,517,358],()=>t(4540)),_N_E=e.O()}]);