(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74],{8254:(e,a,r)=>{Promise.resolve().then(r.t.bind(r,8173,23)),Promise.resolve().then(r.bind(r,9703)),Promise.resolve().then(r.bind(r,9408))},7401:(e,a,r)=>{"use strict";r.d(a,{A:()=>o});var t=r(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return a.filter((e,a,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===a).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,t.forwardRef)((e,a)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:m,...u}=e;return(0,t.createElement)("svg",{ref:a,...n,width:s,height:s,stroke:r,strokeWidth:o?24*Number(i)/Number(s):i,className:l("lucide",c),...u},[...m.map(e=>{let[a,r]=e;return(0,t.createElement)(a,r)}),...Array.isArray(d)?d:[d]])}),o=(e,a)=>{let r=(0,t.forwardRef)((r,n)=>{let{className:o,...c}=r;return(0,t.createElement)(i,{ref:n,iconNode:a,className:l("lucide-".concat(s(e)),o),...c})});return r.displayName="".concat(e),r}},4505:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(7401).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},767:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(7401).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6046:(e,a,r)=>{"use strict";var t=r(6658);r.o(t,"useParams")&&r.d(a,{useParams:function(){return t.useParams}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},9703:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>d});var t=r(5155),s=r(3391),l=r(8173),n=r.n(l),i=r(1536),o=r(8422),c=r(2115);let d=()=>{let[e,a]=(0,c.useState)(!1),{isAuthenticated:r}=(0,s.d4)(e=>e.auth),l=r?[{href:"/my-listings",label:"My Listings",className:"bg-[#2A2F38] font-medium px-6 py-3 text-lg rounded-full"},{href:"/",label:"Home"},{href:"/saved-equipments",label:"Saved Equipment"},{href:"/settings",label:(0,t.jsx)(i.NBi,{className:"inline-block h-6 w-6"})}]:[{href:"/login",label:"Login"}];return(0,t.jsx)("header",{className:"bg-gray-800 py-4 px-4 sm:px-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsxs)(n(),{href:"/",children:[(0,t.jsx)("span",{className:"text-yellow-500 text-2xl",children:"⚙️"}),(0,t.jsx)("span",{className:"text-white font-semibold",children:"Equipment.ng"})]})}),(0,t.jsx)("nav",{className:"hidden md:flex items-center space-x-6",children:l.map(e=>(0,t.jsx)(n(),{href:e.href,className:"text-white hover:text-gray-300 ".concat(e.className||""),children:e.label},e.href))}),(0,t.jsx)("div",{className:"md:hidden",children:(0,t.jsx)("button",{onClick:()=>{a(!e)},className:"text-white focus:outline-none",children:e?(0,t.jsx)(o.U_s,{className:"h-6 w-6"}):(0,t.jsx)(o.TF4,{className:"h-6 w-6"})})})]}),e&&(0,t.jsx)("div",{className:"md:hidden mt-4 bg-gray-700 rounded-lg p-4 space-y-4 transition-all duration-200 ease-in-out",children:l.map(e=>(0,t.jsx)(n(),{href:e.href,className:"block text-white hover:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors ".concat(e.className||""),children:e.label},e.href))})]})})}},9408:(e,a,r)=>{"use strict";r.d(a,{default:()=>f});var t=r(5155),s=r(2115),l=r(9606),n=r(6046),i=r(3391),o=r(2110);let c=(0,r(7401).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var d=r(767),m=r(4505);function u(e){let{label:a,name:r,register:s,error:l,type:n="text"}=e;return(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,t.jsx)("input",{...s(r),type:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),l&&(0,t.jsx)("span",{className:"text-red-500 text-sm",children:l.message})]})}function p(e){let{label:a,name:r,register:s,options:l,error:n}=e;s(r),l.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value)),n&&n.message}function h(e){let{label:a,name:r,register:t}=e;({...t(r)})}let g=e=>{let{images:a,title:r,location:l,cost:n,description:i,make:o,brand:c,yearOfManufacture:d,accessories:m=[],certificates:u=[],isUsed:p=!1}=e,[h,g]=(0,s.useState)(0);return(0,t.jsxs)("div",{className:"w-full max-w-4xl mx-auto p-4 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"w-full aspect-video bg-gray-100 rounded-lg overflow-hidden",children:(0,t.jsx)("img",{src:a[h],alt:"".concat(r," - View ").concat(h+1),className:"w-full h-full object-cover"})}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-4",children:a.map((e,a)=>(0,t.jsx)("button",{onClick:()=>g(a),className:"aspect-video rounded-lg overflow-hidden ".concat(h===a?"ring-2 ring-blue-500":""),children:(0,t.jsx)("img",{src:e,alt:"".concat(r," - Thumbnail ").concat(a+1),className:"w-full h-full object-cover"})},a))})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:r}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:l})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Make"}),(0,t.jsx)("p",{className:"font-medium",children:o})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Brand"}),(0,t.jsx)("p",{className:"font-medium",children:c})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Color"}),(0,t.jsx)("p",{className:"font-medium",children:o})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Year of Manufacture"}),(0,t.jsx)("p",{className:"font-medium",children:d})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Cost"}),(0,t.jsxs)("div",{className:"flex items-baseline space-x-2",children:[(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:n.toLocaleString()}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"negotiable"})]})]}),(0,t.jsxs)("div",{className:"mt-4 sm:mt-0 space-y-2",children:[(0,t.jsx)("span",{className:"text-sm",children:"Pay On Delivery"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",className:"h-4 w-4 text-blue-600"}),(0,t.jsx)("span",{className:"text-sm",children:"Payment After Usage"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",className:"h-4 w-4 text-blue-600"}),(0,t.jsx)("span",{className:"text-sm",children:"Purchase Order/After few days"})]})]})]})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{className:"font-medium",children:"Description"}),(0,t.jsx)("p",{className:"text-gray-700 text-sm",children:i})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{className:"font-medium",children:"Accessories"}),(0,t.jsx)("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-2",children:m.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),(0,t.jsx)("span",{className:"text-sm text-gray-700",children:e})]},a))})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:!p,className:"h-4 w-4 text-blue-600",readOnly:!0}),(0,t.jsx)("span",{className:"text-sm",children:"Brand New"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{className:"font-medium",children:"Certificates"}),(0,t.jsx)("div",{className:"space-y-1",children:u.map((e,a)=>(0,t.jsx)("p",{className:"text-sm text-gray-700",children:e},a))})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:(0,t.jsx)("button",{className:"w-full py-2 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Download a pdf Copy"})})]})};var x=r(2367);function f(){var e;let[a,r]=(0,s.useState)(1),[f,b]=(0,s.useState)(null),[v,y]=(0,s.useState)([]),[j,N]=(0,s.useState)(null),[w,C]=(0,s.useState)([]),q=(0,i.wA)(),[k,P]=(0,s.useState)(null),O=(0,n.useRouter)(),{loading:E}=(0,i.d4)(e=>e.equipment||{}),{user:A}=(0,i.d4)(e=>e.auth),S=null==A?void 0:A._id;console.log("the user i need",null==A?void 0:A._id);let[D,z]=(0,s.useState)(!1),{register:R,handleSubmit:M,formState:{errors:T},watch:F,getValues:L}=(0,l.mN)({defaultValues:{location:"",category:"",subcategory:"",name:"",description:"",brand:"",model:"",workingcondition:"new",pricingschedule:"",amount:"",negotiable:!1,ownerName:"",ownerCity:"",ownerPhone:"",ownerEmail:""}});(0,s.useEffect)(()=>{let e=localStorage.getItem("token");if(!e){O.push("/login"),o.oR.error("Please log in to add equipment");return}P(e)},[O]);let B=(e,a)=>{let r=Array.from(e.target.files),t=["image/jpeg","image/png","image/jpg"],s=["video/mp4","video/mpeg","video/quicktime"];r.forEach(e=>{if("cover"===a||"thumbnails"===a){if(!t.includes(e.type)){o.oR.error("Please upload only image files (JPEG, PNG)");return}if(e.size>5242880){o.oR.error("Image size should be less than 5MB");return}"cover"===a?(b(e),C(a=>({...a,cover:URL.createObjectURL(e)}))):(y(a=>[...a,e]),C(a=>({...a,thumbnails:[...a.thumbnails||[],URL.createObjectURL(e)]})))}else if("video"===a){if(!s.includes(e.type)){o.oR.error("Please upload only video files (MP4, MPEG)");return}if(e.size>0x3200000){o.oR.error("Video size should be less than 50MB");return}N(e),C(a=>({...a,video:URL.createObjectURL(e)}))}})},I=(e,a)=>{"cover"===e?(b(null),C(e=>({...e,cover:null}))):"thumbnails"===e?(y(e=>e.filter((e,r)=>r!==a)),C(e=>({...e,thumbnails:e.thumbnails.filter((e,r)=>r!==a)}))):"video"===e&&(N(null),C(e=>({...e,video:null})))},_=async e=>{if(4===a)try{console.log("Raw form data:",e);let a=new FormData;for(let r of(console.log("I like the id:",S),a.append("userId",S),a.append("location",e.location),a.append("category","june"),a.append("subcategory","apremedi"),a.append("name",e.name),a.append("description",e.description),a.append("brand",e.brand),a.append("model",e.model),a.append("workingcondition","new"===e.workingcondition),a.append("pricingschedule","weely"),a.append("amount",Number(e.amount)),a.append("negotiable",!0===e.negotiable),a.append("owner[name]",e.ownerName),a.append("owner[city]",e.ownerCity),a.append("owner[phonenumber]",e.ownerPhone),a.append("owner[email]",e.ownerEmail),f&&a.append("coverimage",f),v.length>0&&v.forEach(e=>{a.append("thumbnails",e)}),j&&a.append("video",j),console.log("FormData contents:"),a.entries()))console.log(r[0],r[1]);let t=await q((0,x.M5)({formData:a,token:k}));if(t.type===x.M5.fulfilled.type)o.oR.success(t.payload.message),O.push("/");else{var r;o.oR.error((null===(r=t.payload)||void 0===r?void 0:r.message)||"Failed to add equipment")}}catch(e){console.error("Equipment creation error:",e),o.oR.error("Failed to create equipment listing")}};return(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-8 text-center",children:"List an Equipment"}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("div",{className:"flex justify-between",children:["Basic Details","Equipment & Media","Pricing & Owner","Review"].map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center ".concat(r<3?"flex-1":""),children:[(0,t.jsx)("div",{className:"\n                w-8 h-8 rounded-full flex items-center justify-center\n                ".concat(a>r+1?"bg-green-500":a===r+1?"bg-blue-500":"bg-gray-200","\n                text-white font-medium\n              "),children:r+1}),r<3&&(0,t.jsx)("div",{className:"\n                  flex-1 h-1 mx-2\n                  ".concat(a>r+1?"bg-green-500":"bg-gray-200","\n                ")})]},e))})}),(0,t.jsxs)("form",{onSubmit:M(_),encType:"multipart/form-data",className:"space-y-6",children:[1===a&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Basic Details"}),(0,t.jsx)(u,{label:"Location",name:"location",register:R,error:T.location,placeholder:"e.g., Lagos, Nigeria",required:!0}),(0,t.jsx)(p,{label:"Category",name:"category",register:R,options:[{value:"Construction",label:"Construction"},{value:"Mining",label:"Mining"},{value:"Agriculture",label:"Agriculture"}],error:T.category,required:!0}),(0,t.jsx)(p,{label:"Sub Category",name:"subcategory",register:R,options:[{value:"Excavators",label:"Excavators"},{value:"Bulldozers",label:"Bulldozers"},{value:"Cranes",label:"Cranes"}],error:T.subcategory,required:!0}),(0,t.jsx)(u,{label:"Equipment Name",name:"name",register:R,error:T.name,placeholder:"e.g., CAT 320D Excavator",required:!0}),(0,t.jsx)(u,{label:"Description",name:"description",register:R,error:T.description,placeholder:"Detailed description of the equipment",required:!0})]}),2===a&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Equipment Details & Media"}),(0,t.jsx)(u,{label:"Brand",name:"brand",register:R,error:T.brand,placeholder:"e.g., Caterpillar",required:!0}),(0,t.jsx)(u,{label:"Model",name:"model",register:R,error:T.model,placeholder:"e.g., 320D",required:!0}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Working Condition"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("label",{className:"inline-flex items-center",children:[(0,t.jsx)("input",{type:"radio",...R("workingcondition"),value:"new",className:"form-radio"}),(0,t.jsx)("span",{className:"ml-2",children:"New"})]}),(0,t.jsxs)("label",{className:"inline-flex items-center",children:[(0,t.jsx)("input",{type:"radio",...R("workingcondition"),value:"used",className:"form-radio"}),(0,t.jsx)("span",{className:"ml-2",children:"Used"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cover Image"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("label",{className:"cursor-pointer bg-yellow-50 hover:bg-yellow-100 p-4 rounded-lg",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>B(e,"cover"),className:"hidden"}),(0,t.jsx)(c,{className:"h-6 w-6 text-gray-400"})]}),w.cover&&(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:w.cover,alt:"Cover preview",className:"h-20 w-20 object-cover rounded-lg"}),(0,t.jsx)("button",{onClick:()=>I("cover"),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Additional Images"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,t.jsxs)("label",{className:"cursor-pointer bg-yellow-50 hover:bg-yellow-100 p-4 rounded-lg",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>B(e,"thumbnails"),className:"hidden"}),(0,t.jsx)(c,{className:"h-6 w-6 text-gray-400"})]}),null===(e=w.thumbnails)||void 0===e?void 0:e.map((e,a)=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:e,alt:"Thumbnail ".concat(a+1),className:"h-20 w-20 object-cover rounded-lg"}),(0,t.jsx)("button",{onClick:()=>I("thumbnails",a),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})]},a))]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Video"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("label",{className:"cursor-pointer bg-yellow-50 hover:bg-yellow-100 p-4 rounded-lg",children:[(0,t.jsx)("input",{type:"file",accept:"video/*",onChange:e=>B(e,"video"),className:"hidden"}),(0,t.jsx)(c,{className:"h-6 w-6 text-gray-400"})]}),w.video&&(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("video",{src:w.video,className:"h-20 w-20 object-cover rounded-lg",controls:!0}),(0,t.jsx)("button",{onClick:()=>I("video"),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})]})]})]})]})]}),3===a&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Pricing & Owner Details"}),(0,t.jsx)(p,{label:"Pricing Schedule",name:"pricingschedule",register:R,options:[{value:"Per Hour",label:"Per Hour"},{value:"Per Day",label:"Per Day"},{value:"Per Week",label:"Per Week"},{value:"Per Month",label:"Per Month"}],error:T.pricingschedule,required:!0}),(0,t.jsx)(u,{label:"Amount",name:"amount",type:"number",register:R,error:T.amount,required:!0}),(0,t.jsx)(h,{label:"Price is Negotiable",name:"negotiable",register:R}),(0,t.jsxs)("div",{className:"space-y-4 mt-8",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"Owner Information"}),(0,t.jsx)(u,{label:"Full Name",name:"ownerName",register:R,error:T.ownerName,required:!0}),(0,t.jsx)(u,{label:"City",name:"ownerCity",register:R,error:T.ownerCity,required:!0}),(0,t.jsx)(u,{label:"Phone Number",name:"ownerPhone",register:R,error:T.ownerPhone,placeholder:"e.g., +2348012345678",required:!0}),(0,t.jsx)(u,{label:"Email",name:"ownerEmail",type:"email",register:R,error:T.ownerEmail,required:!0})]})]}),4===a&&(()=>{let e=L(),a={images:w.thumbnails||[],coverImage:w.cover,video:w.video,title:e.name,location:e.location,cost:e.amount,description:e.description,brand:e.brand,model:e.model,workingCondition:"new"===e.workingcondition?"New":"Used",pricingSchedule:e.pricingschedule,negotiable:e.negotiable,owner:{name:e.ownerName,city:e.ownerCity,phone:e.ownerPhone,email:e.ownerEmail}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Review Your Listing"}),(0,t.jsx)(g,{...a})]})})(),(0,t.jsxs)("div",{className:"mt-8 flex justify-between",children:[a>1&&(0,t.jsx)("button",{type:"button",onClick:()=>r(a-1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Previous"}),a<4?(0,t.jsx)("button",{type:"button",onClick:()=>r(a+1),className:"ml-auto px-4 py-2 text-sm font-medium text-white bg-gray-500 rounded-md hover:bg-blue-600",children:"Next"}):(0,t.jsx)("button",{type:"submit",disabled:E,className:"ml-auto px-4 py-2 text-sm font-medium text-white rounded-md flex items-center\n                ".concat(E?"bg-gray-400 cursor-not-allowed":"bg-gray-500 hover:bg-gray-600"),children:E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.A,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):"Submit Listing"})]})]}),(0,t.jsx)(o.N9,{position:"bottom-right"})]})}r(5716)},2367:(e,a,r)=>{"use strict";r.d(a,{Ay:()=>f,H:()=>p,M5:()=>i,OX:()=>n,_J:()=>d,zp:()=>o});var t=r(1983),s=r(2651),l=r(6828);console.log("This is the base url:",l.T);let n=(0,t.zD)("equipments/fetchEquipments",async(e,a)=>{let{rejectWithValue:r}=a;try{return(await s.A.get("https://".concat(l.T,"/equipment/allequipment"))).data}catch(e){return r(e.response.data)}}),i=(0,t.zD)("equipments/addEquipment",async(e,a)=>{let{formData:r,token:t}=e,{rejectWithValue:n}=a;try{for(let e of(console.log("FormData contents in reducer:"),r.entries()))console.log(e[0],e[1]);return(await s.A.post("https://".concat(l.T,"/equipment/addequipment"),r,{headers:{Authorization:"Bearer ".concat(t)}})).data}catch(e){var i;return console.error("Add equipment error:",e),n((null===(i=e.response)||void 0===i?void 0:i.data)||{message:"Failed to add equipment"})}}),o=(0,t.zD)("equipments/fetchEquipmentById",async(e,a)=>{let{rejectWithValue:r}=a;console.log("The fetch equipment id:",e);try{let a=await s.A.get("https://".concat(l.T,"/equipment/particularequipment/").concat(e));return console.log("The response",a.data),a.data}catch(e){return console.log(e),r(e.response.data)}}),c=(0,t.zD)("equipments/deleteEquipment",async(e,a)=>{let{rejectWithValue:r}=a;try{return{...(await s.A.delete("https://".concat(l.T,"/equipment/deleteequipment/").concat(e))).data,id:e}}catch(e){return r(e.response.data)}}),d=(0,t.zD)("equipments/addToFavorites",async(e,a)=>{let{rejectWithValue:r}=a;try{let a=localStorage.getItem("token");return(await s.A.post("https://".concat(l.T,"/offer/makeoffer"),{equipmentId:e},{headers:{Authorization:"Bearer ".concat(a)}})).data}catch(e){return r(e.response.data)}}),m=(0,t.zD)("equipments/fetchUserFavorites",async(e,a)=>{let{rejectWithValue:r}=a;try{let e=localStorage.getItem("token");return(await s.A.get("https://".concat(l.T,"/userfavorite/usersfavorite"),{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){return r(e.response.data)}}),u=(0,t.zD)("equipments/removeFromFavorites",async(e,a)=>{let{rejectWithValue:r}=a;try{let a=localStorage.getItem("token"),r=await s.A.delete("https://".concat(l.T,"/userfavorite/deletefavorite/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}});return{favoriteId:e,...r.data}}catch(e){return r(e.response.data)}}),p=(0,t.zD)("equipments/makeOffer",async(e,a)=>{let{rejectWithValue:r}=a;try{let a=localStorage.getItem("token");if(console.log("Making offer with data:",e),!a)throw Error("No authentication token found");let r=await s.A.post("https://".concat(l.T,"/offer/makeoffer"),e,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});return console.log("Offer response:",r.data),r.data}catch(e){var t;return console.error("Offer error:",e),r((null===(t=e.response)||void 0===t?void 0:t.data)||e.message)}}),h=(0,t.Z0)({name:"equipments",initialState:{equipments:[],favorites:[],selectedEquipment:null,loading:!1,error:null,message:null,offers:[],currentOffer:null},reducers:{clearEquipmentState:e=>{e.error=null,e.message=null},clearCurrentOffer:e=>{e.currentOffer=null}},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,a)=>{e.loading=!1,e.equipments=a.payload}).addCase(n.rejected,(e,a)=>{var r;e.loading=!1,e.error=(null===(r=a.payload)||void 0===r?void 0:r.message)||"Failed to fetch equipments"}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.loading=!1,e.equipments.push(a.payload.newEquipment),e.message=a.payload.message}).addCase(i.rejected,(e,a)=>{var r;e.loading=!1,e.error=(null===(r=a.payload)||void 0===r?void 0:r.message)||"Failed to add equipment"}).addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,a)=>{e.loading=!1,e.selectedEquipment=a.payload}).addCase(o.rejected,(e,a)=>{var r;e.loading=!1,e.error=(null===(r=a.payload)||void 0===r?void 0:r.message)||"Failed to fetch equipment"}).addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,(e,a)=>{e.loading=!1,e.equipments=e.equipments.filter(e=>e._id!==a.payload.id),e.message=a.payload.message}).addCase(c.rejected,(e,a)=>{var r;e.loading=!1,e.error=(null===(r=a.payload)||void 0===r?void 0:r.message)||"Failed to delete equipment"}).addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,a)=>{e.loading=!1,e.favorites.push(a.payload.newFavorite),e.message=a.payload.message}).addCase(d.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(m.pending,e=>{e.loading=!0,e.error=null}).addCase(m.fulfilled,(e,a)=>{e.loading=!1,e.favorites=a.payload}).addCase(m.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(u.pending,e=>{e.loading=!0,e.error=null}).addCase(u.fulfilled,(e,a)=>{e.loading=!1,e.favorites=e.favorites.filter(e=>e._id!==a.payload.favoriteId),e.message="Equipment removed from favorites"}).addCase(u.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(p.pending,e=>{e.loading=!0,e.error=null}).addCase(p.fulfilled,(e,a)=>{e.loading=!1,e.currentOffer=a.payload.offer,e.message=a.payload.message,e.offers.push(a.payload.offer)}).addCase(p.rejected,(e,a)=>{e.loading=!1,e.error=a.payload})}}),{clearEquipmentState:g,clearCurrentOffer:x}=h.actions,f=h.reducer},6828:(e,a,r)=>{"use strict";r.d(a,{T:()=>t});let t="equipmentapi.onrender.com";console.log("The base url:",t)},5716:()=>{},3435:(e,a,r)=>{"use strict";r.d(a,{k5:()=>d});var t=r(2115),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=t.createContext&&t.createContext(s),n=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}function o(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,t)}return r}function c(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?o(Object(r),!0).forEach(function(a){var t,s;t=a,s=r[a],(t=function(e){var a=function(e,a){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,a||"default");if("object"!=typeof t)return t;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==typeof a?a:a+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function d(e){return a=>t.createElement(m,i({attr:c({},e.attr)},a),function e(a){return a&&a.map((a,r)=>t.createElement(a.tag,c({key:r},a.attr),e(a.child)))}(e.child))}function m(e){var a=a=>{var r,{attr:s,size:l,title:o}=e,d=function(e,a){if(null==e)return{};var r,t,s=function(e,a){if(null==e)return{};var r={};for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){if(a.indexOf(t)>=0)continue;r[t]=e[t]}return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)r=l[t],!(a.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,n),m=l||a.size||"1em";return a.className&&(r=a.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,d,{className:r,style:c(c({color:e.color||a.color},a.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==l?t.createElement(l.Consumer,null,e=>a(e)):a(s)}}},e=>{var a=a=>e(e.s=a);e.O(0,[797,711,777,391,173,25,606,110,441,517,358],()=>a(8254)),_N_E=e.O()}]);