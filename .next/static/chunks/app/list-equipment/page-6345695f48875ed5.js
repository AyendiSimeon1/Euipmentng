(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74],{4540:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,8173,23)),Promise.resolve().then(a.bind(a,9703)),Promise.resolve().then(a.bind(a,5062))},7401:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var s=a(2115);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:m,...u}=e;return(0,s.createElement)("svg",{ref:t,...i,width:l,height:l,stroke:a,strokeWidth:o?24*Number(n)/Number(l):n,className:r("lucide",d),...u},[...m.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let a=(0,s.forwardRef)((a,i)=>{let{className:o,...d}=a;return(0,s.createElement)(n,{ref:i,iconNode:t,className:r("lucide-".concat(l(e)),o),...d})});return a.displayName="".concat(e),a}},9703:(e,t,a)=>{"use strict";a.d(t,{default:()=>d});var s=a(5155),l=a(2115);a(5565);var r=a(8173),i=a.n(r),n=a(1536),o=a(8422);let d=()=>{let[e,t]=(0,l.useState)(!1);return(0,s.jsx)("header",{className:"bg-gray-800 py-4 px-4 sm:px-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-yellow-500 text-2xl",children:"⚙️"}),(0,s.jsx)("span",{className:"text-white font-semibold",children:"Equipment.ng"})]}),(0,s.jsxs)("nav",{className:"hidden md:flex items-center space-x-6",children:[(0,s.jsx)(i(),{href:"/my-listings",className:"text-white bg-[#2A2F38] font-medium px-6 py-3 text-lg rounded-full",children:"My Listings"}),(0,s.jsx)(i(),{href:"/",className:"text-white hover:text-gray-300",children:"Home"}),(0,s.jsx)(i(),{href:"/about",className:"text-white hover:text-gray-300",children:"About"}),(0,s.jsx)(i(),{href:"/contact",className:"text-white hover:text-gray-300",children:"Contact"}),(0,s.jsx)(i(),{href:"/profile",className:"text-white hover:text-gray-300",children:(0,s.jsx)(n.NBi,{className:"inline-block h-6 w-6"})})]}),(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsx)("button",{onClick:()=>{t(!e)},className:"text-white focus:outline-none",children:e?(0,s.jsx)(o.U_s,{className:"h-6 w-6"}):(0,s.jsx)(o.TF4,{className:"h-6 w-6"})})})]}),e&&(0,s.jsxs)("div",{className:"md:hidden mt-4 space-y-2",children:[(0,s.jsx)(i(),{href:"/my-listings",className:"block text-white bg-[#2A2F38] font-medium px-6 py-3 text-lg rounded-full",children:"My Listings"}),(0,s.jsx)(i(),{href:"/",className:"block text-white hover:text-gray-300",children:"Home"}),(0,s.jsx)(i(),{href:"/about",className:"block text-white hover:text-gray-300",children:"About"}),(0,s.jsx)(i(),{href:"/contact",className:"block text-white hover:text-gray-300",children:"Contact"}),(0,s.jsx)(i(),{href:"/profile",className:"block text-white hover:text-gray-300",children:"Profile"})]})]})})}},5062:(e,t,a)=>{"use strict";a.d(t,{default:()=>x});var s=a(5155),l=a(9606);function r(e){let{label:t,name:a,register:l,error:r,type:i="text"}=e;return(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,s.jsx)("input",{...l(a),type:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),r&&(0,s.jsx)("span",{className:"text-red-500 text-sm",children:r.message})]})}function i(e){let{label:t,name:a,register:l,options:r,error:i}=e;l(a),r.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value)),i&&i.message}var n=a(2115),o=a(6046),d=a(2367),c=a(3391),m=a(2110);function u(e){let{label:t,name:a,register:s}=e;({...s(a)})}a(5716);let p=(0,a(7401).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function x(){let[e,t]=(0,n.useState)(1),[a,x]=(0,n.useState)([]),[h,g]=(0,n.useState)(""),y=(0,c.wA)(),v=(0,o.useRouter)(),[f,b]=(0,n.useState)([]),[j,N]=(0,n.useState)(null),[w,q]=(0,n.useState)([]),{loading:k}=(0,c.d4)(e=>e.equipment||{}),{register:C,handleSubmit:E,formState:{errors:A},watch:S}=(0,l.mN)();(0,n.useEffect)(()=>{localStorage.getItem("token")||(v.push("/login"),m.oR.error("Please log in to add equipment"))},[v]);let P=async e=>{var t,a,s,l,r,i,n,o,c,u,p,x,h,g,b,N;try{let p=new FormData,x={location:(null===(t=e.location)||void 0===t?void 0:t.trim())||"Default Location",category:(null===(a=e.category)||void 0===a?void 0:a.trim())||"construction",subcategory:(null===(s=e.subcategory)||void 0===s?void 0:s.trim())||"general",name:(null===(l=e.name)||void 0===l?void 0:l.trim())||"Unnamed Equipment",description:(null===(r=e.description)||void 0===r?void 0:r.trim())||"No description provided",brand:(null===(i=e.brand)||void 0===i?void 0:i.trim())||"Unknown Brand",model:(null===(n=e.model)||void 0===n?void 0:n.trim())||"Generic Model",workingcondition:String("brandNew"===e.condition),pricingschedule:(null===(o=e.priceSchedule)||void 0===o?void 0:o.trim())||"hourly",amount:String(e.amount||"0"),negotiable:String(!!e.negotiable)};Object.entries(x).forEach(e=>{let[t,a]=e;p.append(t,a)}),(null==f?void 0:f.length)&&f.forEach(e=>{e instanceof File&&p.append("images",e)}),j instanceof File&&p.append("video",j);let h={};p.forEach((e,t)=>{h[t]=e}),console.log("Submitting form data:",h);let g=await y((0,d.M5)(h));if(g.type===d.M5.fulfilled.type)m.oR.success(g.payload.message),v.push("/");else{let e=(null===(c=g.payload)||void 0===c?void 0:c.error)||(null===(u=g.payload)||void 0===u?void 0:u.message)||"Failed to add equipment";m.oR.error(e)}}catch(t){console.error("Equipment creation error:",{message:t.message,response:null===(p=t.response)||void 0===p?void 0:p.data,status:null===(x=t.response)||void 0===x?void 0:x.status});let e=(null===(g=t.response)||void 0===g?void 0:null===(h=g.data)||void 0===h?void 0:h.message)||(null===(N=t.response)||void 0===N?void 0:null===(b=N.data)||void 0===b?void 0:b.error)||"An error occurred while adding equipment";m.oR.error(e)}};return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-8 text-center",children:"List an Equipment"}),(0,s.jsxs)("form",{onSubmit:E(P),children:[1===e&&(0,s.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,s.jsx)(m.N9,{}),(0,s.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Basic Details"}),(0,s.jsx)(r,{label:"Location",name:"location",register:C,error:A.location}),(0,s.jsx)(i,{label:"Category",name:"category",register:C,options:[{value:"electronics",label:"Electronics"},{value:"machinery",label:"Machinery"},{value:"construction",label:"Construction"},{value:"agriculture",label:"Agriculture"}],error:A.category}),(0,s.jsx)(i,{label:"Sub Category",name:"subcategory",register:C,options:[{value:"heavy",label:"Heavy Equipment"},{value:"light",label:"Light Equipment"},{value:"tools",label:"Tools"},{value:"accessories",label:"Accessories"}],error:A.subcategory}),(0,s.jsx)(r,{label:"Equipment Name",name:"name",register:C,error:A.name}),(0,s.jsx)(r,{label:"Description",name:"description",register:C,error:A.description}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Images"}),(0,s.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{let t=Array.from(e.target.files),a=t.filter(e=>{let t=e.type.startsWith("image/"),a=e.size<=5242880;return t||m.oR.error("Please upload only image files"),a||m.oR.error("Image size should be less than 5MB"),t&&a});0!==a.length&&(b(a),q(t.map(e=>URL.createObjectURL(e))))},className:"inline-flex items-center px-2 py-1 rounded-full text-sm bg-gray-100"}),(0,s.jsx)("div",{className:"mt-2 grid grid-cols-3 gap-2",children:w.map((e,t)=>(0,s.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"h-24 w-24 object-cover rounded"},t))})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Video"}),(0,s.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{let t=e.target.files[0];if(t){let e=t.type.startsWith("video/"),a=t.size<=0x3200000;if(!e){m.oR.error("Please upload a valid video file");return}if(!a){m.oR.error("Video size should be less than 50MB");return}N(t)}},className:"inline-flex items-center px-2 py-1 rounded-full text-sm bg-gray-100"})]})]}),2===e&&(()=>{let e=e=>{x(a.filter((t,a)=>a!==e))};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Equipment Information"}),(0,s.jsx)(r,{label:"Name of Equipment",name:"equipmentName",register:C,error:A.equipmentName}),(0,s.jsx)(r,{label:"Description",name:"description",register:C,error:A.description}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(r,{label:"Brand",name:"brand",register:C,error:A.brand}),(0,s.jsx)(r,{label:"Model",name:"model",register:C,error:A.model})]}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("div",{className:"space-y-2  ",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Accessories"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 p-2 border rounded-md",children:[a.map((t,a)=>(0,s.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-sm bg-gray-100",children:[t,(0,s.jsx)("button",{type:"button",onClick:()=>e(a),className:"ml-1 text-gray-500 hover:text-gray-700",children:"\xd7"})]},a)),(0,s.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"===e.key&&h.trim()&&(e.preventDefault(),x([...a,h.trim()]),g(""))},placeholder:"Type and press Enter to add",className:"flex-1 outline-none min-w-[200px] p-1"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Press Enter to add an accessory"})]}),(0,s.jsxs)("div",{className:" gap-4 items-center ml-10",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Working condition"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("label",{className:"inline-flex items-center",children:[(0,s.jsx)("input",{type:"radio",...C("condition",{required:"Please select a condition"}),value:"brandNew",className:"form-radio h-4 w-4 text-[#2A2F38] focus:ring-[#2A2F38]"}),(0,s.jsx)("span",{className:"ml-2",children:"Brand New"})]}),(0,s.jsxs)("label",{className:"inline-flex items-center",children:[(0,s.jsx)("input",{type:"radio",...C("condition",{required:"Please select a condition"}),value:"refurbished",className:"form-radio h-4 w-4 text-[#2A2F38] focus:ring-[#2A2F38]"}),(0,s.jsx)("span",{className:"ml-2",children:"Refurbished"})]})]})]}),A.condition&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:A.condition.message})]})]})})(),3===e&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl text-center font-semibold mb-6",children:"Pricing"}),(0,s.jsx)(i,{label:"Price Schedule",name:"priceSchedule",register:C,options:[{value:"hourly",label:"Hourly"},{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"}],error:A.priceSchedule}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(r,{label:"Price",name:"price",type:"number",min:"0",register:C,error:A.price}),(0,s.jsx)(i,{label:"Currency",name:"currency",register:C,options:[{value:"USD",label:"USD"},{value:"EUR",label:"EUR"}]})]}),(0,s.jsx)(u,{label:"Negotiable",name:"isNegotiable",register:C}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"Payment Method"}),(0,s.jsxs)("div",{role:"radiogroup",className:"space-y-2",children:[(0,s.jsx)(u,{label:"Pay On Delivery",name:"paymentMethod",value:"onDelivery",register:C,type:"radio"}),(0,s.jsx)(u,{label:"Payment After Usage",name:"paymentMethod",value:"afterUsage",register:C,type:"radio"})]})]})]}),(0,s.jsxs)("div",{className:"mt-8 flex justify-between",children:[e>1&&(0,s.jsx)("button",{type:"button",onClick:()=>t(e-1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Previous"}),e<3?(0,s.jsx)("button",{type:"button",onClick:()=>t(e+1),className:"px-4 py-2 text-sm font-medium text-white bg-gray-500 rounded-md hover:bg-gray-800",children:"Next"}):(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white rounded-md flex items-center justify-center\n                    ".concat(k?"bg-gray-400 cursor-not-allowed":"bg-gray-500 hover:bg-gray-800"),children:k?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):"Complete"})]})]})]})}},2367:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>u,M5:()=>n});var s=a(1983),l=a(2651),r=a(6828);console.log("This is the base url:",r.T);let i=(0,s.zD)("equipments/fetchEquipments",async(e,t)=>{let{rejectWithValue:a}=t;try{return(await l.A.get("https://".concat(r.T,"/equipment/allequipment"))).data}catch(e){return a(e.response.data)}}),n=(0,s.zD)("equipments/addEquipment",async(e,t)=>{let{rejectWithValue:a}=t;try{let t=localStorage.getItem("token");if(!t)return a({message:"No authentication token found"});return console.log("Sending equipment data:",e),(await l.A.post("https://".concat(r.T,"/equipment/addequipment"),e,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).data}catch(e){var s;return console.error("Add equipment error:",e),a((null===(s=e.response)||void 0===s?void 0:s.data)||{message:"Failed to add equipment"})}}),o=(0,s.zD)("equipments/fetchEquipmentById",async(e,t)=>{let{rejectWithValue:a}=t;console.log("The fetch equipment id:",e);try{let t=await l.A.get("https://".concat(r.T,"/equipment/particularequipment/").concat(e));return console.log("The response",t.data),t.data}catch(e){return console.log(e),a(e.response.data)}}),d=(0,s.zD)("equipments/deleteEquipment",async(e,t)=>{let{rejectWithValue:a}=t;try{return{...(await l.A.delete("https://".concat(r.T,"/equipment/deleteequipment/").concat(e))).data,id:e}}catch(e){return a(e.response.data)}}),c=(0,s.Z0)({name:"equipments",initialState:{equipments:[],selectedEquipment:null,loading:!1,error:null,message:null},reducers:{clearEquipmentState:e=>{e.error=null,e.message=null}},extraReducers:e=>{e.addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,t)=>{e.loading=!1,e.equipments=t.payload}).addCase(i.rejected,(e,t)=>{var a;e.loading=!1,e.error=(null===(a=t.payload)||void 0===a?void 0:a.message)||"Failed to fetch equipments"}).addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,t)=>{e.loading=!1,e.equipments.push(t.payload.newEquipment),e.message=t.payload.message}).addCase(n.rejected,(e,t)=>{var a;e.loading=!1,e.error=(null===(a=t.payload)||void 0===a?void 0:a.message)||"Failed to add equipment"}).addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,t)=>{e.loading=!1,e.selectedEquipment=t.payload}).addCase(o.rejected,(e,t)=>{var a;e.loading=!1,e.error=(null===(a=t.payload)||void 0===a?void 0:a.message)||"Failed to fetch equipment"}).addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,t)=>{e.loading=!1,e.equipments=e.equipments.filter(e=>e._id!==t.payload.id),e.message=t.payload.message}).addCase(d.rejected,(e,t)=>{var a;e.loading=!1,e.error=(null===(a=t.payload)||void 0===a?void 0:a.message)||"Failed to delete equipment"})}}),{clearEquipmentState:m}=c.actions,u=c.reducer},6828:(e,t,a)=>{"use strict";a.d(t,{T:()=>s});let s="equipmentapi.onrender.com";console.log("The base url:",s)},5716:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[797,711,777,25,173,606,391,303,829,441,517,358],()=>t(4540)),_N_E=e.O()}]);