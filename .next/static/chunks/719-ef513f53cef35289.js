"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[719],{9703:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var s=t(5155),r=t(3391),l=t(8173),n=t.n(l),d=t(8422),i=t(1536),o=t(2115);let c=()=>{let[e,a]=(0,o.useState)(!1),{isAuthenticated:t}=(0,r.d4)(e=>e.auth),[l,c]=(0,o.useState)(!1),m=(0,o.useRef)(null),u=(0,r.wA)();(0,o.useEffect)(()=>{let e=e=>{m.current&&!m.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let p=t?[{href:"/my-listings",label:"My Listings",className:"bg-[#2A2F38] font-medium px-6 py-3 text-lg rounded-full"},{href:"/",label:"Home"},{href:"/saved-equipments",label:"Saved Equipment"},{type:"dropdown",label:(0,s.jsx)(i.NBi,{className:"inline-block h-6 w-6"}),items:[{href:"/settings",label:"Settings",icon:(0,s.jsx)(i.Pcn,{className:"h-5 w-5"})},{onClick:()=>{u(logout()),c(!1),a(!1)},label:"Logout",icon:(0,s.jsx)(i.axc,{className:"h-5 w-5"})}]}]:[{href:"/login",label:"Login"}];return(0,s.jsx)("header",{className:"bg-gray-800 py-4 px-4 sm:px-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsxs)(n(),{href:"/",children:[(0,s.jsx)("span",{className:"text-yellow-500 text-2xl",children:"⚙️"}),(0,s.jsx)("span",{className:"text-white font-semibold",children:"Equipment.ng"})]})}),(0,s.jsx)("nav",{className:"hidden md:flex items-center space-x-6",children:p.map(e=>"dropdown"===e.type?(0,s.jsxs)("div",{className:"relative",ref:m,children:[(0,s.jsx)("button",{onClick:()=>c(!l),className:"text-white hover:text-gray-300 focus:outline-none",children:e.label}),l&&(0,s.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50",children:e.items.map((e,a)=>e.href?(0,s.jsxs)(n(),{href:e.href,className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>c(!1),children:[e.icon,(0,s.jsx)("span",{className:"ml-2",children:e.label})]},e.href):(0,s.jsxs)("button",{onClick:e.onClick,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.icon,(0,s.jsx)("span",{className:"ml-2",children:e.label})]},a))})]},"user-dropdown"):(0,s.jsx)(n(),{href:e.href,className:"text-white hover:text-gray-300 ".concat(e.className||""),children:e.label},e.href))}),(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsx)("button",{onClick:()=>{a(!e)},className:"text-white focus:outline-none",children:e?(0,s.jsx)(d.U_s,{className:"h-6 w-6"}):(0,s.jsx)(d.TF4,{className:"h-6 w-6"})})})]}),e&&(0,s.jsx)("div",{className:"md:hidden mt-4 bg-gray-700 rounded-lg p-4 space-y-4 transition-all duration-200 ease-in-out",children:p.map(e=>(0,s.jsx)(n(),{href:e.href,className:"block text-white hover:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors ".concat(e.className||""),children:e.label},e.href))})]})})}},1281:(e,a,t)=>{t.d(a,{default:()=>x});var s=t(5155),r=t(2115),l=t(3391),n=t(2367),d=t(8173),i=t.n(d),o=t(7401);let c=(0,o.A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),m=(0,o.A)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);var u=t(9606),p=t(2110),h=t(2734),f=t(4505);let g=(0,o.A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function x(){let e=(0,l.wA)(),{equipments:a,loading:t,error:d}=(0,l.d4)(e=>e.equipments),[o,x]=(0,r.useState)({}),[y,v]=(0,r.useState)({}),{favorites:j}=(0,l.d4)(e=>e.equipments);(0,r.useEffect)(()=>{e((0,n.OX)())},[e]);let{handleSubmit:N,formState:{errors:w,isSubmitting:b}}=(0,u.mN)(),q=async a=>{try{x(e=>({...e,[equipmentId]:!0})),v(e=>({...e,[equipmentId]:!1}));let a=await e((0,n._J)(equipmentId));if(n._J.fulfilled.match(a))v(e=>({...e,[equipmentId]:!0})),p.oR.success("Added to favorites");else{var t;p.oR.error((null===(t=a.payload)||void 0===t?void 0:t.message)||"Failed to add to favorites")}}catch(e){p.oR.error("Error adding to favorites")}finally{x(e=>({...e,[equipmentId]:!1}))}};return t?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[200px] space-y-4",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#2A2F38]"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm",children:"Loading equipment..."})]}):d?(0,s.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-4",children:(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md w-full",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(c,{className:"h-6 w-6 text-red-500"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-red-800",children:"Error Loading Equipment"})]}),(0,s.jsx)("p",{className:"mt-2 text-sm text-red-700",children:(null==d?void 0:d.message)||"Something went wrong. Please try again."}),(0,s.jsxs)("button",{onClick:()=>e((0,n.OX)()),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[(0,s.jsx)(m,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})}):(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"font-bold text-xl ml-10 px-2 py-3",children:"Listed Equipments "}),(0,s.jsx)("div",{className:"grid grid-cols-1 mx-3 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 px-4 sm:px-6 lg:px-8",children:a.map((e,a)=>(0,s.jsx)("div",{className:"relative rounded-lg overflow-hidden shadow-lg bg-white",children:(0,s.jsxs)(i(),{href:"equipment-detail/".concat(e._id),children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("img",{className:"w-full h-48 object-cover rounded-t-lg",src:e.coverimage||"/future.jpeg",alt:e.name,onError:e=>{e.target.onerror=null,e.target.src="/future.jpeg"}}),(0,s.jsx)("form",{onSubmit:N(()=>q(e._id)),children:(0,s.jsx)("button",{type:"submit",disabled:o[e._id],className:"absolute top-3 right-3 p-2 rounded-full bg-white/80 hover:bg-white transition-colors",onClick:e=>e.preventDefault(),children:o[e._id]?(0,s.jsx)(f.A,{className:"h-5 w-5 animate-spin text-gray-700"}):y[e._id]?(0,s.jsx)(g,{className:"h-5 w-5 text-green-500"}):j.some(a=>a.equipmentId===e._id)?(0,s.jsx)(h.$eR,{className:"h-5 w-5 text-yellow-500"}):(0,s.jsx)(h.in_,{className:"h-5 w-5 text-gray-700"})})})]}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{className:"text-sm sm:text-sm font-bold text-gray-800",children:["₦  ",e.amount]}),(0,s.jsx)("div",{className:"",children:(0,s.jsx)("p",{children:"per/day"})})]}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.duration}),(0,s.jsx)("div",{className:"text-lg sm:text-xl font-semibold text-gray-700",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:e.description}),(0,s.jsx)("div",{className:"text-sm text-gray-600 font-semibold",children:e.workingcondition}),(0,s.jsx)("div",{className:"text-sm text-gray-600 font-semibold",children:(0,s.jsx)("p",{children:"Avalaibilty: Immediately"})})]})})]})},a))})]})}},2367:(e,a,t)=>{t.d(a,{Ay:()=>x,BI:()=>m,H:()=>p,M5:()=>d,OX:()=>n,_J:()=>c,wy:()=>u,zp:()=>i});var s=t(1983),r=t(2651),l=t(6828);console.log("This is the base url:",l.T);let n=(0,s.zD)("equipments/fetchEquipments",async(e,a)=>{let{rejectWithValue:t}=a;try{return(await r.A.get("https://".concat(l.T,"/equipment/allequipment"))).data}catch(e){return t(e.response.data)}}),d=(0,s.zD)("equipments/addEquipment",async(e,a)=>{let{formData:t,token:s}=e,{rejectWithValue:n}=a;try{for(let e of(console.log("FormData contents in reducer:"),t.entries()))console.log(e[0],e[1]);return(await r.A.post("https://".concat(l.T,"/equipment/addequipment"),t,{headers:{Authorization:"Bearer ".concat(s)}})).data}catch(e){var d;return console.error("Add equipment error:",e),n((null===(d=e.response)||void 0===d?void 0:d.data)||{message:"Failed to add equipment"})}}),i=(0,s.zD)("equipments/fetchEquipmentById",async(e,a)=>{let{rejectWithValue:t}=a;console.log("The fetch equipment id:",e);try{let a=await r.A.get("https://".concat(l.T,"/equipment/particularequipment/").concat(e));return console.log("The response",a.data),a.data}catch(e){return console.log(e),t(e.response.data)}}),o=(0,s.zD)("equipments/deleteEquipment",async(e,a)=>{let{rejectWithValue:t}=a;try{return{...(await r.A.delete("https://".concat(l.T,"/equipment/deleteequipment/").concat(e))).data,id:e}}catch(e){return t(e.response.data)}}),c=(0,s.zD)("equipments/addToFavorites",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=localStorage.getItem("token");return(await r.A.post("https://".concat(l.T,"/offer/makeoffer"),{equipmentId:e},{headers:{Authorization:"Bearer ".concat(a)}})).data}catch(e){return t(e.response.data)}}),m=(0,s.zD)("equipments/fetchUserFavorites",async(e,a)=>{let{rejectWithValue:t}=a;try{let e=localStorage.getItem("token");return(await r.A.get("https://".concat(l.T,"/userfavorite/usersfavorite"),{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){return t(e.response.data)}}),u=(0,s.zD)("equipments/removeFromFavorites",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=localStorage.getItem("token"),t=await r.A.delete("https://".concat(l.T,"/userfavorite/deletefavorite/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}});return{favoriteId:e,...t.data}}catch(e){return t(e.response.data)}}),p=(0,s.zD)("equipments/makeOffer",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=localStorage.getItem("token");if(console.log("Making offer with data:",e),!a)throw Error("No authentication token found");let t=await r.A.post("https://".concat(l.T,"/offer/makeoffer"),e,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});return console.log("Offer response:",t.data),t.data}catch(e){var s;return console.error("Offer error:",e),t((null===(s=e.response)||void 0===s?void 0:s.data)||e.message)}}),h=(0,s.Z0)({name:"equipments",initialState:{equipments:[],favorites:[],selectedEquipment:null,loading:!1,error:null,message:null,offers:[],currentOffer:null},reducers:{clearEquipmentState:e=>{e.error=null,e.message=null},clearCurrentOffer:e=>{e.currentOffer=null}},extraReducers:e=>{e.addCase(n.pending,e=>{e.loading=!0,e.error=null}).addCase(n.fulfilled,(e,a)=>{e.loading=!1,e.equipments=a.payload}).addCase(n.rejected,(e,a)=>{var t;e.loading=!1,e.error=(null===(t=a.payload)||void 0===t?void 0:t.message)||"Failed to fetch equipments"}).addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,a)=>{e.loading=!1,e.equipments.push(a.payload.newEquipment),e.message=a.payload.message}).addCase(d.rejected,(e,a)=>{var t;e.loading=!1,e.error=(null===(t=a.payload)||void 0===t?void 0:t.message)||"Failed to add equipment"}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.loading=!1,e.selectedEquipment=a.payload}).addCase(i.rejected,(e,a)=>{var t;e.loading=!1,e.error=(null===(t=a.payload)||void 0===t?void 0:t.message)||"Failed to fetch equipment"}).addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,a)=>{e.loading=!1,e.equipments=e.equipments.filter(e=>e._id!==a.payload.id),e.message=a.payload.message}).addCase(o.rejected,(e,a)=>{var t;e.loading=!1,e.error=(null===(t=a.payload)||void 0===t?void 0:t.message)||"Failed to delete equipment"}).addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,(e,a)=>{e.loading=!1,e.favorites.push(a.payload.newFavorite),e.message=a.payload.message}).addCase(c.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(m.pending,e=>{e.loading=!0,e.error=null}).addCase(m.fulfilled,(e,a)=>{e.loading=!1,e.favorites=a.payload}).addCase(m.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(u.pending,e=>{e.loading=!0,e.error=null}).addCase(u.fulfilled,(e,a)=>{e.loading=!1,e.favorites=e.favorites.filter(e=>e._id!==a.payload.favoriteId),e.message="Equipment removed from favorites"}).addCase(u.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(p.pending,e=>{e.loading=!0,e.error=null}).addCase(p.fulfilled,(e,a)=>{e.loading=!1,e.currentOffer=a.payload.offer,e.message=a.payload.message,e.offers.push(a.payload.offer)}).addCase(p.rejected,(e,a)=>{e.loading=!1,e.error=a.payload})}}),{clearEquipmentState:f,clearCurrentOffer:g}=h.actions,x=h.reducer},6828:(e,a,t)=>{t.d(a,{T:()=>s});let s="equipmentapi.onrender.com";console.log("The base url:",s)}}]);