"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[793],{9703:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var r=t(5155),n=t(3391),l=t(8173),s=t.n(l),o=t(8422),d=t(1536),i=t(2115);let c=()=>{let[e,a]=(0,i.useState)(!1),{isAuthenticated:t}=(0,n.d4)(e=>e.auth),[l,c]=(0,i.useState)(!1),u=(0,i.useRef)(null),p=(0,n.wA)();(0,i.useEffect)(()=>{let e=e=>{u.current&&!u.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let m=t?[{href:"/my-listings",label:"My Listings",className:"bg-[#2A2F38] font-medium px-6 py-3 text-lg rounded-full"},{href:"/",label:"Home"},{href:"/saved-equipments",label:"Saved Equipment"},{type:"dropdown",label:(0,r.jsx)(d.NBi,{className:"inline-block h-6 w-6"}),items:[{href:"/settings",label:"Settings",icon:(0,r.jsx)(d.Pcn,{className:"h-5 w-5"})},{onClick:()=>{p(logout()),c(!1),a(!1)},label:"Logout",icon:(0,r.jsx)(d.axc,{className:"h-5 w-5"})}]}]:[{href:"/login",label:"Login"}];return(0,r.jsx)("header",{className:"bg-gray-800 py-4 px-4 sm:px-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsxs)(s(),{href:"/",children:[(0,r.jsx)("span",{className:"text-yellow-500 text-2xl",children:"⚙️"}),(0,r.jsx)("span",{className:"text-white font-semibold",children:"Equipment.ng"})]})}),(0,r.jsx)("nav",{className:"hidden md:flex items-center space-x-6",children:m.map(e=>"dropdown"===e.type?(0,r.jsxs)("div",{className:"relative",ref:u,children:[(0,r.jsx)("button",{onClick:()=>c(!l),className:"text-white hover:text-gray-300 focus:outline-none",children:e.label}),l&&(0,r.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50",children:e.items.map((e,a)=>e.href?(0,r.jsxs)(s(),{href:e.href,className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>c(!1),children:[e.icon,(0,r.jsx)("span",{className:"ml-2",children:e.label})]},e.href):(0,r.jsxs)("button",{onClick:e.onClick,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.icon,(0,r.jsx)("span",{className:"ml-2",children:e.label})]},a))})]},"user-dropdown"):(0,r.jsx)(s(),{href:e.href,className:"text-white hover:text-gray-300 ".concat(e.className||""),children:e.label},e.href))}),(0,r.jsx)("div",{className:"md:hidden",children:(0,r.jsx)("button",{onClick:()=>{a(!e)},className:"text-white focus:outline-none",children:e?(0,r.jsx)(o.U_s,{className:"h-6 w-6"}):(0,r.jsx)(o.TF4,{className:"h-6 w-6"})})})]}),e&&(0,r.jsx)("div",{className:"md:hidden mt-4 bg-gray-700 rounded-lg p-4 space-y-4 transition-all duration-200 ease-in-out",children:m.map(e=>(0,r.jsx)(s(),{href:e.href,className:"block text-white hover:text-gray-300 px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors ".concat(e.className||""),children:e.label},e.href))})]})})}},2367:(e,a,t)=>{t.d(a,{Ay:()=>x,BI:()=>u,H:()=>m,M5:()=>o,OX:()=>s,R:()=>f,_J:()=>c,wy:()=>p,xt:()=>g,zp:()=>d});var r=t(1983),n=t(2651),l=t(6828);console.log("This is the base url:",l.T);let s=(0,r.zD)("equipments/fetchEquipments",async(e,a)=>{let{rejectWithValue:t}=a;try{return(await n.A.get("https://".concat(l.T,"/equipment/allequipment"))).data}catch(e){return t(e.response.data)}}),o=(0,r.zD)("equipments/addEquipment",async(e,a)=>{let{formData:t,token:r}=e,{rejectWithValue:s}=a;try{for(let e of(console.log("FormData contents in reducer:"),t.entries()))console.log(e[0],e[1]);return(await n.A.post("https://".concat(l.T,"/equipment/addequipment"),t,{headers:{Authorization:"Bearer ".concat(r)}})).data}catch(e){var o;return console.error("Add equipment error:",e),s((null===(o=e.response)||void 0===o?void 0:o.data)||{message:"Failed to add equipment"})}}),d=(0,r.zD)("equipments/fetchEquipmentById",async(e,a)=>{let{rejectWithValue:t}=a;console.log("The fetch equipment id:",e);try{let a=await n.A.get("https://".concat(l.T,"/equipment/particularequipment/").concat(e));return console.log("The response",a.data),a.data}catch(e){return console.log(e),t(e.response.data)}}),i=(0,r.zD)("equipments/deleteEquipment",async(e,a)=>{let{rejectWithValue:t}=a;try{return{...(await n.A.delete("https://".concat(l.T,"/equipment/deleteequipment/").concat(e))).data,id:e}}catch(e){return t(e.response.data)}}),c=(0,r.zD)("equipments/addToFavorites",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=localStorage.getItem("token");return(await n.A.post("https://".concat(l.T,"/offer/makeoffer"),{equipmentId:e},{headers:{Authorization:"Bearer ".concat(a)}})).data}catch(e){return t(e.response.data)}}),u=(0,r.zD)("equipments/fetchUserFavorites",async(e,a)=>{let{rejectWithValue:t}=a;try{let e=localStorage.getItem("token");return(await n.A.get("https://".concat(l.T,"/userfavorite/usersfavorite"),{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(e){return t(e.response.data)}}),p=(0,r.zD)("equipments/removeFromFavorites",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=localStorage.getItem("token"),t=await n.A.delete("https://".concat(l.T,"/userfavorite/deletefavorite/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}});return{favoriteId:e,...t.data}}catch(e){return t(e.response.data)}}),m=(0,r.zD)("equipments/makeOffer",async(e,a)=>{let{rejectWithValue:t}=a;try{let a=localStorage.getItem("token");if(console.log("Making offer with data:",e),!a)throw Error("No authentication token found");let t=await n.A.post("https://".concat(l.T,"/offer/makeoffer"),e,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});return console.log("Offer response:",t.data),t.data}catch(e){var r;return console.error("Offer error:",e),t((null===(r=e.response)||void 0===r?void 0:r.data)||e.message)}}),g=(0,r.zD)("equipments/fetchUserListedEquipment",async(e,a)=>{let{rejectWithValue:t}=a;try{let e=localStorage.getItem("token");return(await n.A.get("https://".concat(l.T,"/equipment/userslistedequipment"),{headers:{Authorization:"Bearer ".concat(e)}})).data.userlistedequipment}catch(e){return t(e.response.data)}}),h=(0,r.Z0)({name:"equipments",initialState:{equipments:[],favorites:[],userListedEquipment:[],selectedEquipment:null,loading:!1,error:null,message:null,offers:[],currentOffer:null},reducers:{clearEquipmentState:e=>{e.error=null,e.message=null},clearCurrentOffer:e=>{e.currentOffer=null}},clearUserListedEquipment:e=>{e.userListedEquipment=[]},extraReducers:e=>{e.addCase(s.pending,e=>{e.loading=!0,e.error=null}).addCase(s.fulfilled,(e,a)=>{e.loading=!1,e.equipments=a.payload}).addCase(s.rejected,(e,a)=>{var t;e.loading=!1,e.error=(null===(t=a.payload)||void 0===t?void 0:t.message)||"Failed to fetch equipments"}).addCase(o.pending,e=>{e.loading=!0,e.error=null}).addCase(o.fulfilled,(e,a)=>{e.loading=!1,e.equipments.push(a.payload.newEquipment),e.message=a.payload.message}).addCase(o.rejected,(e,a)=>{var t;e.loading=!1,e.error=(null===(t=a.payload)||void 0===t?void 0:t.message)||"Failed to add equipment"}).addCase(d.pending,e=>{e.loading=!0,e.error=null}).addCase(d.fulfilled,(e,a)=>{e.loading=!1,e.selectedEquipment=a.payload}).addCase(d.rejected,(e,a)=>{var t;e.loading=!1,e.error=(null===(t=a.payload)||void 0===t?void 0:t.message)||"Failed to fetch equipment"}).addCase(i.pending,e=>{e.loading=!0,e.error=null}).addCase(i.fulfilled,(e,a)=>{e.loading=!1,e.equipments=e.equipments.filter(e=>e._id!==a.payload.id),e.message=a.payload.message}).addCase(i.rejected,(e,a)=>{var t;e.loading=!1,e.error=(null===(t=a.payload)||void 0===t?void 0:t.message)||"Failed to delete equipment"}).addCase(c.pending,e=>{e.loading=!0,e.error=null}).addCase(c.fulfilled,(e,a)=>{e.loading=!1,e.favorites.push(a.payload.newFavorite),e.message=a.payload.message}).addCase(c.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(u.pending,e=>{e.loading=!0,e.error=null}).addCase(u.fulfilled,(e,a)=>{e.loading=!1,e.favorites=a.payload}).addCase(u.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(p.pending,e=>{e.loading=!0,e.error=null}).addCase(p.fulfilled,(e,a)=>{e.loading=!1,e.favorites=e.favorites.filter(e=>e._id!==a.payload.favoriteId),e.message="Equipment removed from favorites"}).addCase(p.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(m.pending,e=>{e.loading=!0,e.error=null}).addCase(m.fulfilled,(e,a)=>{e.loading=!1,e.currentOffer=a.payload.offer,e.message=a.payload.message,e.offers.push(a.payload.offer)}).addCase(m.rejected,(e,a)=>{e.loading=!1,e.error=a.payload}).addCase(g.pending,e=>{e.loading=!0,e.error=null}).addCase(g.fulfilled,(e,a)=>{e.loading=!1,e.userListedEquipment=a.payload}).addCase(g.rejected,(e,a)=>{e.loading=!1,e.error=a.payload})}}),f=e=>{var a,t;return{userListedEquipment:(null==e?void 0:null===(a=e.equipments)||void 0===a?void 0:a.userListedEquipment)||[],loading:(null==e?void 0:null===(t=e.equipment)||void 0===t?void 0:t.loading)||!1}},{clearEquipmentState:y,clearCurrentOffer:v}=h.actions,x=h.reducer},6828:(e,a,t)=>{t.d(a,{T:()=>r});let r="equipmentapi.onrender.com";console.log("The base url:",r)}}]);